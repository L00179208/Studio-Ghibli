<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: courses/src/api/controllers/courseController.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: courses/src/api/controllers/courseController.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const CourseRoutes = require("../routes/courseRoutes");
const CourseService = require("../services/courseService");
const courseService = require("../services/courseService");
const courseSchema = require("../validations/courseSchema");
const service = new courseService();

/**
 * Controller for handling courses.
 * @namespace CourseController
 */

const CourseController = {
  /**
   * Creates a new course.
   * @memberof CourseController
   * @param {*} req - The request object.
   * @param {*} res - The response object.
   * @returns {JsonResponse} - Returns a JSON response.
   */
  async createCourse(req, res) {
    const { error } = courseSchema.validate(req.body);

    if (error) {
      return res.status(400).json({ message: error.details[0].message });
    } else {
      try {
        const course = await service.createCourse(req.body);
        res.status(201).send({
          message: "Course has been created successfully",
          data: course,
        });
      } catch (error) {
        res
          .status(500)
          .send({ message: "Error creating Course", error: error.message });
      }
    }
  },
  /**
   * Edits an existing course.
   * @memberof CourseController
   * @param {*} req - The request object.
   * @param {*} res - The response object.
   * @returns {JsonResponse} - Returns a JSON response.
   */
  async editCourse(req, res) {
    const { error } = courseSchema.validate(req.body);

    if (error) {
      return res.status(400).json({ message: error.details[0].message });
    } else {
      try {
        const courseId = req.params.id;
        const updateCourse = await service.editCourse(courseId, req.body);
        res.status(201).send({
          message: "Course has been updated successfully",
          data: updateCourse,
        });
      } catch (error) {
        res.status(500).json({ message: error.message });
      }
    }
  },
  /**
   * Gets details of a course.
   * @memberof CourseController
   * @param {*} req - The request object.
   * @param {*} res - The response object.
   * @returns {JsonResponse} - Returns a JSON response.
   */
  async getCourseDetails(req, res) {
    const courseId = req.params.id;

    try {
      const courseInfo = await service.getCourseDetails(courseId);
      res.status(201).send({
        message: "Course has been fetched successfully",
        data: courseInfo,
      });
    } catch (error) {
      res.status(500).json({ message: error.message });
    }
  },
  /**
   * Deletes a course.
   * @memberof CourseController
   * @param {*} req - The request object.
   * @param {*} res - The response object.
   * @returns {JsonResponse} - Returns a JSON response.
   */
  async deleteCourse(req, res) {
    try {
      const courseId = req.params.id;
      const updateCourse = await service.deleteCourse(courseId);
      if (updateCourse) {
        res.status(201).send({
          message: "Course has been trashed successfully",
          data: updateCourse,
        });
      } else {
        res.status(500).send({
          message: "Unable to delete the Course",
          data: updateCourse,
        });
      }
    } catch (error) {
      res.status(500).json({ message: error.message });
    }
  },
  /**
   * Gets all courses.
   * @memberof CourseController
   * @param {*} req - The request object.
   * @param {*} res - The response object.
   * @returns {JsonResponse} - Returns a JSON response.
   */
  async getAllCourses(req, res) {
    try {
      const courses = await service.getAllCourses(
        req.query.search,
        req.query.order_by,
        req.query.sort
      );
      if (courses) {
        res.status(201).send({
          message: "Course has been fetched successfully",
          data: courses,
        });
      } else {
        res.status(500).send({
          message: "Unable to fetch the courses",
          data: [],
        });
      }
    } catch (error) {
      res.status(500).json({ message: "Error in Fetching Courses", error: error.message });
    }
  },
};

module.exports = CourseController;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="CourseController.html">CourseController</a></li><li><a href="CourseService.html">CourseService</a></li><li><a href="authMiddleware.html">authMiddleware</a></li><li><a href="courseRoutes.html">courseRoutes</a></li></ul><h3>Classes</h3><ul><li><a href="CustomerService.html">CustomerService</a></li><li><a href="EnrollmentService.html">EnrollmentService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CustomerController">CustomerController</a></li><li><a href="global.html#EnrollmentController">EnrollmentController</a></li><li><a href="global.html#sendResponse">sendResponse</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Apr 01 2024 17:03:19 GMT+0100 (Irish Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
